/* 印刷プレビュー用のスタイル */

.print-preview-container {
  padding: 20px;
  background-color: #f5f5f5;
  width: 100%;
}

.print-content {
  background-color: white;
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* 統合グラフビューコンテナ */
.print-unified-graph-container {
  position: relative;
  width: 100%;
  height: 100%;
  min-height: 1000px;
  overflow: hidden; /* 見切れを防ぐ */
}

/* 統合グラフビュー */
.print-unified-graph-view {
  width: 100%;
  height: 100%;
  position: relative;
  overflow: hidden; /* 見切れを防ぐ */
}

/* ストーリーテキストアイテム（グラフ上のテキストオーバーレイ） */
.print-story-text-item {
  color: #1f2937;
  font-family: system-ui, -apple-system, sans-serif;
  background-color: rgba(255, 255, 255, 0.3);
  backdrop-filter: blur(4px);
  -webkit-backdrop-filter: blur(4px);
  padding: 16px;
  border-radius: 16px;
  z-index: 1000;
}

/* 印刷時のスタイル */
@media print {
  /* ページ設定は @page ルールで動的に設定される（pdf-export-button.tsxで生成） */

  /* 背景色を白に */
  body {
    background-color: white !important;
  }

  /* ページ全体の余白を削除 */
  body * {
    visibility: hidden;
  }

  /* SVGコンテナとその親要素、中身だけを表示 */
  .print-preview-container,
  .print-preview-container .print-content,
  .print-content .print-unified-graph-container,
  .print-unified-graph-container,
  .print-unified-graph-container *,
  .print-unified-graph-view,
  .print-unified-graph-view *,
  .print-unified-graph-view svg,
  .print-unified-graph-view svg * {
    visibility: visible !important;
  }

  /* 親コンテナのスタイル調整 */
  .print-preview-container {
    background-color: white !important;
    padding: 0 !important;
    margin: 0 !important;
    width: 100% !important;
    height: 100% !important;
    position: relative !important;
  }

  .print-content {
    background-color: white !important;
    padding: 0 !important;
    margin: 0 !important;
    box-shadow: none !important;
    width: 100% !important;
    max-width: 100% !important;
    height: auto !important;
    overflow: visible !important;
    position: relative !important;
  }

  /* SVGコンテナの位置を調整 */
  .print-unified-graph-container {
    position: relative !important;
    top: 0;
    left: 0;
    width: 100% !important;
    height: auto !important;
    min-height: auto !important;
    page-break-inside: avoid;
    overflow: visible !important;
  }

  .print-unified-graph-view {
    width: 100% !important;
    height: auto !important;
    overflow: visible !important;
  }

  /* SVGをページサイズに収める */
  .print-unified-graph-view svg {
    max-width: 100% !important;
    max-height: 100% !important;
    width: 100% !important;
    height: auto !important;
    display: block !important;
  }

  /* 色の調整（グレースケールモード用） */
  .print-content.grayscale {
    filter: grayscale(100%);
  }

  /* リンクの下線を削除 */
  a {
    text-decoration: none;
    color: inherit;
  }

  /* 不要な要素を非表示（PDF出力ボタンなど） */
  button,
  .no-print {
    display: none !important;
    visibility: hidden !important;
  }

  /* 設定パネルを非表示 */
  .w-80 {
    display: none !important;
    visibility: hidden !important;
  }

  /* テキストオーバーレイの印刷時のスタイル */
  .print-story-text-item {
    background-color: rgba(255, 255, 255, 0.3) !important;
    backdrop-filter: "blur(4px)";
    -webkit-backdrop-filter: "blur(4px)";
    /* プレビュー時のスタイルを上書き */
    color: #1f2937 !important;
    font-family: system-ui, -apple-system, sans-serif !important;
    padding: 16px !important;
    border-radius: 16px !important;
    visibility: visible !important;
  }
}

/* プレビュー時のスタイル調整 */
@media screen {
  .print-content {
    /* 用紙の縦横比を維持しつつ、画面に収まるようにスケール */
    aspect-ratio: var(--page-aspect-ratio, 1.414); /* デフォルトはA4の縦横比 */
    max-width: 100%;
    max-height: 90vh; /* 画面の高さの90%を超えないように */
    margin: 0 auto;
    overflow: hidden; /* 見切れを防ぐ */
    display: flex;
    flex-direction: column;
  }

  /* ページサイズの視覚的な表示（オプション） */
  /* .print-content::before {
    content: "";
    display: block;
    width: 100%;
    height: 1px;
    background: #e0e0e0;
  } */
}
